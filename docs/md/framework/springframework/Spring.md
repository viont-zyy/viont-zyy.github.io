# Spring



## spring相关面试题

### Spring 包含的模块有哪些？

Spring Core Container。Spring 框架的核心模块，也可以说是基础模块，主要提供 IoC 依赖注入功能的支持，其他所有的功能基本都需要依赖于该模块。

SpringAOP，提供面向切面的编程实现。

Spring Web。其中spring-webmvc ： 提供对 Spring MVC 的实现；spring-websocket ： 提供了对 WebSocket 的支持，WebSocket 可以让客户端和服务端进行双向通信。

Spring Test。Spring 团队提倡测试驱动开发，有了控制反转 (IoC)的帮助，单元测试和集成测试变得更简单。



### 谈谈对于 Spring IoC 的了解

**IoC（Inverse of Control:控制反转）** 是一种设计思想，而不是一个具体的技术实现。IoC 的思想就是将原本在程序中手动创建对象的控制权，交由 Spring 框架来管理。不过IoC 并非 Spring 特有，在其他语言中也有应用。

**为什么叫控制反转？**

**控制** ：指的是对象创建（实例化、管理）的权力；**反转** ：控制权交给外部环境（Spring 框架、IoC 容器）

在 Spring 中， IoC 容器是 Spring 用来实现 IoC 的载体， IoC 容器实际上就是个 Map（key，value），Map 中存放的是各种对象。Spring 中的 IoC 的实现原理就是工厂模式加反射机制。



### 什么是AOP?有什么应用场景？

AOP（Aspect-Oriented Programming，面向切面编程）是面向对象OOD的延申，它能够将那些与业务无关却被业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块间的耦合度，并有利于未来的可扩展性和可维护性。 

Spring AOP是基于动态代理的，**如果要代理的对象实现了某个接口，那么Spring AOP就会使用JDK动态代理去创建代理对象**；**而对于没有实现接口的对象**，就无法使用JDK动态代理，**转而使用CGlib动态代理生成一个被代理对象的子类来作为代理**。

AOP 的应用场景举几个例子： 

- 记录日志(调用方法后记录日志) 

- 监控性能(统计方法运行时间) 权

- 限控制(调用方法前校验是否有权限) 

- 事务管理(调用方法前开启事务，调用方法后提交关闭事务 ) 

- 缓存优化(第一次调用查询数据库，将查询结果放入内存对象， 第二次调用，直接从内存对象返回，不需要查询数据库 )



### Spring框架中用到了哪些设计模式？

1.**工厂设计模式**：Spring使用工厂模式通过BeanFactory和ApplicationContext创建bean对象。

2.**代理设计模式**：Spring AOP功能的实现。

3.**单例设计模式**：Spring中的bean默认都是单例的。

4.**适配器模式**：Spring AOP的增强或通知（Advice）使用到了适配器模式、Spring MVC中也是用到了适配器模式适配Controller。

5.模板方法模式：Spring中的jdbcTemplate、hibernateTemplate等以Template结尾的对数据库操作的类，它们就使用到了模板模式。

6.包装器设计模式：我们的项目需要连接多个数据库，而且不同的客户在每次访问中根据需要会去访问不同的数据库。这种模式让我们可以根据客户的需求能够动态切换不同的数据源。

7.观察者模式：Spring事件驱动模型就是观察者模式很经典的一个应用。



### Spring中的单例bean的线程安全问题了解吗？

大部分时候我们并没有在系统中使用多线程，所以很少有人会关注这个问题。单例bean存在线程问题，主要是因为当多个线程操作同一个对象的时候，对这个对象的非静态成员变量的写操作会存在线程安全问题。

有两种常见的解决方案：

1.在bean对象中尽量避免定义可变的成员变量（不太现实）。

2.在类中定义一个ThreadLocal成员变量，将需要的可变成员变量保存在ThreadLocal中（推荐的一种方式）。